% !TEX root = ../../thesis.tex

\tikz[remember picture,overlay] \node[inner sep=0pt] at (current page.center){\includegraphics[width=\paperwidth,height=\paperheight]{Poppy_dimensions}};
\clearpage


\section{A little robot} % (fold)

Toward the goals presented in the introduction, the size of the robot is a really important aspect.

On one hand, small size makes very difficult the integration of complex, powerful and accurate mechatronics. Therefore it reduces the scope of technology we could use for the robot. In particular, the integration of hydraulic and pneumatic actuator, as well as advanced mechanisms involving several moving parts is really challenging.

On the other hand, having a small robot is indeed really convenient for exploring morphological properties in the real world.

First, it changes significantly the experimental process: The ratio between weight, and thus energy and torques enforced by movements, and the mechanical robustness of the structure and of the actuators, is such that the robot can fall without breaking itself. Moreover, it is lightweight, which allows people to handle it directly without additional infrastructure and in a secure way. On the one hand, all of this speeds up the experimental process. On the other hand, it changes deeply the methodology of movement and motor skill design by allowing creating movements directly on the robot by real-world experiments without a simulation process. This includes for instance adjusting in real time motor primitives, even extreme ones

Second, this brings advantages regarding human interaction, which is an important focus in this work: On the one hand, from the above reasons, this rules out the problem of physical security in the Human/Robot interaction. On the other hand, the size of the robot plays an important role in the psychological representation that people have of it.

However exploring morphological properties requires to have a robot which morphology has an actual impact on its dynamic. Being too small reduces this impact because its reduce the inertia and the role of intrinsic structural frequency.

Thus Poppy's size is a compromise to allow at the same times easy testing in the real world, the integration of a large-number of degree of freedoms (25 DoF) and having a structure those dynamic properties cannot be neglected.

\section{Bio-inspired morphology} % (fold)

In the previous sections we described the global techniques and guidelines we used for building a novel humanoid robot, especially its lightness and modular morphology. In this section we will describe how we actually designed Poppy's body.

As we are especially interested by exploring and understanding the role of morphology for cognition and complex tasks achievement, among the open ended possibilities to actually create a humanoid robot, we decided to explore bio-inspired morphology. Indeed, it appears the Evolution have found several tricks permitting animals to act robustly and efficiently in the real world without requiring complex explicit computation.

We therefore decided to design the initial Poppy's body following bio-inspiration principles. In this direction, the human body appears as a good and relevant starting point. Yet a direct transposition from human body to robot morphology does not seem an effective way as the mechanical properties of biological material such as bones and muscles are very different from the technology we have in robotics. Thus we preferred take only the functional inspiration i.e. mimicking the mechanism/system properties rather than the actual morphology.

This bio-inspiration is expressed on the whole structure of Poppy and as a central challenge for humanoid robot is the biped walking, this functional bio-inspiration is mainly expressed on the locomotive system (legs and trunks) in order to increase the robot robustness, agility and stability during the walking.


\subsection{Morphological proportions} % (fold)

On the anatomical point of view, Poppy reproduces the human proportions as described in the literature~\cite{dufour2005biomecanique} (see Fig. 3) and the sensorimotor space organization: i.e. the main degrees of freedom (actuated and passive).

While the human grows from child to adult, his body proportions change~\cite{REF}. An hypothesis we made is that the human proportions converge toward an optimal link ratio. Based on this hypothesis we decided to respect the human body proportion of an adult thus the size of the robot describes previously (see section REF) has defined all\footnote{An exception was made for the head, which is bigger to make it more cute and will be discussed in the section REF.} Poppy's links dimensions following the proportions presented on \figurename~\ref{fig:poppy-human-proportion}.

\begin{figure}[tb]
    \begin{center}
        \includegraphics[width=0.8\linewidth]{proportion_poppy.jpg}
    \end{center}
    \caption{Caption here}
    \label{fig:poppy-human-proportion}
\end{figure}

Of course, this hypothesis is contestable, and as example, mimicking the proportions of a child having the same size of Poppy could be as relevant. Yet this choice has been done as a starting point, thanks to design methodology we have and the open source diffusion, anyone can easily explore other choices and compare them.

\subsection{Small and lightweight feet} % (fold)

Toward the achievement of biped locomotion, most humanoid robots have big, flat and rectangular feet. This design is indeed really convenient to simplify balance problem while it permits to increase easily the sustentation polygon, but this design choice implies some constraints:

First, increasing the foot size increases the lever arm applied to the ankle. It can be useful as it extends the impact of the ankle control over the whole body. Yet given the potential high-torque applied to the ankle, achieving such control requires very powerful actuator.
Powerful actuators are heavier and therefore the whole actuation design of the robot needs to be powerful in order to be able to lift and move the feet.

Secondly, some interesting dynamic controllers for biped locomotion seems require mass-less legs~\cite{REF}. Indeed, in this case there is no inertia moment due to the legs motions, therefore controlling the whole body is simplified. While this case is a theoretical trick, it can still be transfered in the real world by having a strong trunk/legs mass ratio. Therefore, either the global mass of the robot should increases in order to make the mass of leg negligible or we should design more lightweight legs.
Because they are the most éloigné element from the trunk, the mass of the feet has a strong impact on the leg inertia.

Finally, while current state of the art, shows that it stills more simple to have big and heavy foot\cite{REF} to achieve biped locomotion, some works show impressive results thanks to the use of small feet or flexible feet~\cite{bruneau2001dynamic}. We can cite in particular Petman (see figure REF) those demonstrates breaking-edge skills for biped locomotion over very complex terrain\footnote{Link youtube}.
Moreover this aspect seems to be coherent with the multi-legged animals kingdom, indeed most of animals have really thin legs and very small feet (see fig REF).

So even if common humanoid robots still use big and powerful feet, for the above mentioned reason, we decided to explore bio-inspired, small, and lightweight feet.

In particular regarding the human foot late it appears the

Also unlike most humanoids, Poppy only has one active DoF. Indeed, while Poppy has small feet, it appears the actual moment it can transmit to the ground is really little for the lateral motion. Also creating an active articulation would add a lot of mass (72 gr) for little actual effect. Yet this DoF is useful for ground adaptation. We therefore choose to use a passive joint with spring.

Following the bio-inspiration principle, we took functionnal inspiration from the human foot. Yet the human foot is very complex system involving dozens of bones, muscles and tendons, we simplified the design by extracting relevant fonctionnal human foot properties. Thus, the toes articulation allowing a better stability during walking
Poppy's feet have a length close to the human body/foot ratio

% Poppy's feet design takes some functional inspiration from the actual human foot such as the proportion, compliance and toes which are key features concerning both the human walking and biped robots with a human-like gait. In addition, we wanted to reduce the weight (i.e. reducing inertia) of the feet to increase the robot agility. To keep the foot as light as possible while conserving functional properties we decided to use a single motor for the main motion (sagittal plane) while other DoF are passives.

% The lateral motion of the foot is limited: few range of motion, low torque. The need of a 360 deg and high torque motor seems over rated. Technically the addition of a motor lead to a major weight gain. We preferred to design  instead a passive joint using torsion spring.

% \begin{figure}[tb]
% \centering
%     \subfloat[][]{\label{fig:frontal_trunk}\includegraphics[height=4cm]{human_foot_sagittal.png}}
%     \hfil
%     \subfloat[][]{\label{fig:sagittal_trunk}\includegraphics[height=3cm]{human_foot_lateral.png}}
%     \caption{}
%     \label{fig:poppy_torso}
% \end{figure}


Poppy has small foot compare to its height (about 17\%), For example Nao's feet represents 25\% of its height.

\begin{table}[h]
\centering
\begin{tabular}{l| c c c c c}
    & Human & Nao & Darwin Op & Nimbro-OP & Poppy \\
    \hline
    height (cm) & 15 & 25 & 23 & 20 & 83\\
    Foot length (cm) & 15 & 25 & 23 & 20 & 14.5\\
    ratio (\%) & 15 & 25 & 23 & 20 & 17\\
\end{tabular}
\caption{}
\label{tab:poppy_feet_compare}
\end{table}


\begin{figure}[p]
    \begin{center}
        \includegraphics[width=\linewidth]{poppy_foot_v1.pdf}
    \end{center}
    \caption{Caption here}
    \label{fig:poppy-foot-v1-design}
\end{figure}


This design choice as a strong impact on the overall design, because we have lightweight feet, the power requirer to make the leg move is reduced, we can therefore use smaller motors which are also lighter.


\subsection{Legs} % (fold)

Poppy's legs have 6 DoF each, three in the sagittal plane (ankle, knee, hip), one in the horizontal plane (hip) and one in the frontal plane (hip). These joints allow to reproduce the main DoF of the human legs. In addition, if we look closely at the human morphology of the femur, it appears that it is inclined of 6 degrees (see \figurename~\ref{fig:human_thigh}). This particularity is reproduced on Poppy's thigh (see \figurename~\ref{fig:poppy_leg_design}).

\begin{figure}[tb]
\centering
    \subfloat[][]{\label{fig:human_thigh}\includegraphics[height=6.5cm]{human_thigh.jpg}}
    \hfil
    \subfloat[][]{\label{fig:model_thigh}\includegraphics[height=6.5cm]{model_thigh.jpg}}
    \caption{ a) Effect of the human being bended femur on the human biped locomotion. b) Model used for the comparison of the two thighs morphology. c) Actual realization of the bended thigh on the poppy platform}
    \label{fig:poppy_thigh}
\end{figure}


This slight bending makes the feet closer to the projection of the center of gravity and changes the mechanical behavior.
In this thesis we describe both the theoretical model (see appendix REF) and real experiments (see section REF) showing that this bio-inspired thigh allows the reduction of falling speed by almost 60\% (during single support phase) and the decrease of the lateral motion needed for the mass transfer from one foot to the other by 30\% (double support phase).


\begin{figure}[p]
    \begin{center}
        \includegraphics[width=\linewidth]{poppy_leg_design.pdf}
    \end{center}
    \caption{Caption here}
    \label{fig:poppy_leg_design}
\end{figure}


Also, following the principles previously mentioned, the leg design is made to be as light as possible. This was achieved by using truss structure (see section REF) and the minimum required amount of power, involving two Dynamixel MX-28 for the ankle and knee joint, and a Dynamixel MX-64 for the hip joint (see \figurename~\ref{fig:poppy_leg_design}). Yet as explained in section REF, most of our parts have several configurations allowing to change the actuator. Thus it is possible to easily replace the knee actuator by a Dynamixel MX-64 (see \figurename~\ref{REF})



\section{Hip} % (fold)
\label{sec:hip}


Poppy's small feet increase the challenge of the balance of the robot. Also, to keep the projection of the center of gravity (CoG) inside the support polygon, defined by the feet geometry, it is necessary to control the weight distribution of the robot structure. In particular, we wanted that in its initial upright posture, Poppy stays balanced without any control.

Robotis actuators are among the densest elements in the Poppy platform ($ 1700 kg.m^{3} $) and are the main source of weight ($1.8 kg$). Their spatial distribution represents therefore the major part of the distribution of masses in Poppy. In order to limit the displacement of the mass on the back of the robot, we decided to avoid conventional ball joint assembly for the hip joint such that it is made on most robots based on Robotis motors such as DarwinOP or Acroban (i.e. distributed in a plane parallel to the sagittal plane). Instead, we placed them on the frontal plane as the from left to right stability is greater than the from rear to front stability. By doing so, the hip joint is not a real ball joint anymore. To keep a wide range of motion, we used an original non-symmetrical motor configuration (see \figurename~\ref{fig:poppy_zoom_hip_blueprint}).

This configuration allows:

\begin{itemize}
    \item creating a compact multi-articulated pelvis,
    \item Hip rotations (in frontal plane) lead to slight vertical motions of the leg which act as a damper during walking. This damping can be tuned by adjusting the stiffness of the actuator.
    \item It reduces the hip joint lever arm and thus reduces the torque required to maintain position in single support phase.
    \item reduce the distance between rotation axis to stay close from a ball joint,
    \item the resulting V shape frees room to increase the range of motion of the legs.
\end{itemize}

\begin{figure}[p]
    \begin{center}
        \includegraphics[width=\linewidth]{poppy_zoom_hip_blueprint.pdf}
    \end{center}
    \caption{Caption here}
    \label{fig:poppy_zoom_hip_blueprint}
\end{figure}

In addition, the connection with the abs motors is slightly moved toward the front. This permits to move upper mass and to increase the range of motion of the abs motor so the robot can

Contrary to the design of the hips, it was not possible here to fit the 5 motors in the frontal plane due to the limited space in the trunk. So to reduce the shifting of the center of gravity to the back of the robot we gradually shifted the upper body to the front. By doing so, we keep the CoG in the support polygon.

\section{Multi-articulated torso} % (fold)

Humanoid robots mostly have a rigid torso without any joint (e.g DarwinOp, Nao, NimbroOP) or few DoF (e.g. two for Icub, one for HRP-2).

However if we look the human trunk and in particular the spine, it has a complex mechanical structure and a large network of dense muscles controlling a very large number of DoFs. It allows for complex motions in several direction while keeping the balance. Its movements are regulated by a complex combination of anticipatory and reactive muscle actions.

Before 1982 and the work of Thorstensson (58), few scientists have really approached the subject. Since, several studies have investigated the activity of the trunk during walking, and showed that the trunk is not only an additional mass but for example participates actively in the walking of Human.
Electromyographics studies showed the importance of the erector spinae muscles in the organization of motor pattern during walking (61),(62),(63) but also of other rhythmic tasks (62). Like the salamander (8), a sequential activation of erector spinae muscles was found (64),(62).
They also show that the trunk is leaning forward and oscillates from 1.5 to 6 deg during walking. In addition, lateral flexion during a gait cycle in the frontal plane promotes the weight shift and opposite rotations of the lumbar and thoracic belts in the horizontal plane allows extend the footstep (59); (60).

\begin{figure}[h]
    \begin{center}
        \includegraphics[width=0.7\linewidth]{human_trunk.jpg}
    \end{center}
    \caption{Caption here}
    \label{fig:human_spine_system}
\end{figure}

Thus the trunk of the human is complex and seems to play an important role in the walking of human, essential to all human movements and especially for walking. The movements of the spine can facilitate the transfer of weight from one leg to the other, improve the balance but also participate in the dynamics of the walking.

It seems therefore interesting to enable a humanoid robot trying to explore the role of morphology, to have an articulated trunk in order to evaluate its impact on several task from dynamic walking to physical human-robot interaction. Yet the human trunk is difficult to replicate on a small robot using servo motors and therefore a simplification is needed.



Interestingly, Ceccato~\cite{ceccatoPlos09} studied the role of trunk during walking and highlighted that there are some places in the spine where the displacements are the most important, i.e. that the apparent high dimensionality of the trunk could be factorized down to a few essential components/dimensions.

Accordingly, it appears we can replicate the essential degrees of freedom of human trunk with two DoFs in the sagittal plane, two in the coronal plane, placed in the pelvis and shoulder /thoracic and one in the horizontal plane placed in the middle of his trunk.

These main degrees of freedom have been first introduced on Acroban~\cite{Ly2011bio} and continued on Poppy (see \figurename~\ref{fig:poppy_torso}).
Thus Poppy's trunk involves five degree of freedom, we use two Dynamixel MX-64 for the abs as they have to support and move the whole upper body mass, the 3 others joints being less soumis to high constraints are powered by MX-28 (see \figurename~\ref{fig:torso_blueprint}). This multi-articulated trunk allows a wide range of motion that can be useful to explore the role of the torso motion on complex dynamics behavior (balance, walking), grasping and reaching task, or for human-robot interaction, extending the expressive and emotional abilities.

\begin{figure}[p]
\centering
    \subfloat[][]{\label{fig:torso_blueprint}\includegraphics[width=\linewidth]{poppy_torso.pdf}}


    \subfloat[][]{\label{fig:frontal_trunk}\includegraphics[width=0.5\linewidth]{trunk_face.png}}
    \hfil
    \subfloat[][]{\label{fig:sagittal_trunk}\includegraphics[width=0.5\linewidth]{trunk_sagittal.png}}
    \caption{These figures illustrate some morphological features of the Poppy humanoid Robot:\newline a) The Poppy's limbs follow the human being proportion as described in~\cite{dufour2005biomecanique}.\newline b) and c) Poppy has an articulated trunk of 5 DoFs which allows more natural and fluid motions while improving the user experience during physical interaction and actively participating to the balance of the robot.}
    \label{fig:poppy_torso}
\end{figure}



\subsection{Upper limbs} % (fold)

Poppy's arms were not designed for explore grasping but rather for balancing, expressive and interaction purposes. Thus they only involve the minimum articulations to produce a wide range of motion but they do not involve articulated hands.

\begin{figure}[tb]
\centering
    \subfloat[][\url{http://youtu.be/StFIMuyz11M}]{\includegraphics[width=0.45\linewidth]{TER_surprise.jpg}}
    \hfil
    \subfloat[][\url{http://youtu.be/RwCtNwLk10E}]{\includegraphics[width=0.45\linewidth]{TER_joy.jpg}}\\
    \subfloat[][\url{http://youtu.be/qrcmLXbpUVo}]{\includegraphics[width=0.45\linewidth]{TER_sad.jpg}}
    \hfil
    \subfloat[][\url{http://youtu.be/ms2niFLevv8}]{\includegraphics[width=0.45\linewidth]{TER_fear.jpg}}
    \caption{}
    \label{fig:TER_cognitic}
\end{figure}

Thanks to its multi-articulated structure and its expressive head, Poppy has a particularly high potential for creating and studying emotions and gesture social communication (see \figurename~\ref{fig:TER_cognitic}).


% \begin{figure}[tb]
%     \begin{center}
%         \includegraphics[width=\linewidth]{arm_block.png}
%     \end{center}
%     \caption{Caption here}
%     \label{fig:figure1}
% \end{figure}




